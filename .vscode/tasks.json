{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "freecad: Run NoGUI (headless test)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/run-freecad.ps1 -ScriptPath ${workspaceFolder}/FreecadNoGUIPys/freecadtest_headless.py",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "freecad: Launch GUI (open app)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/run-freecad-gui.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "never", "panel": "dedicated" }
    },
    {
      "label": "gh: Bootstrap (check/install)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/gh-bootstrap.ps1",
      "problemMatcher": []
    },
    {
      "label": "gh: Release Append CN Highlights (auto)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/generate-cn-highlights.ps1 -UpdateRelease -Tag ${input:releaseTag}",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "gh: Release Create (prompt, generate-notes)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/gh-release-create.ps1 -GenerateNotes",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "gh: Release Create (prompt, draft)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/gh-release-create.ps1 -Draft -GenerateNotes",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "VS Code: Backup user (zip)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/backup-vscode-user.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated", "clear": true }
    },
    {
      "label": "VS Code: Restore user (latest, merge tasks)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/restore-vscode-user.ps1 -MergeTasks",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "VS Code: Bootstrap after reinstall",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/bootstrap-after-reinstall.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "gh: Login (browser)",
      "type": "shell",
      "command": "gh auth login",
      "options": {
        "shell": {
          "executable": "pwsh.exe",
          "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"]
        }
      },
      "problemMatcher": []
    },
    {
      "label": "gh: Login with token (masked)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/gh-login-token.ps1",
      "problemMatcher": []
    },
    {
      "label": "gh: Status",
      "type": "shell",
      "command": "gh auth status",
      "options": {
        "shell": {
          "executable": "pwsh.exe",
          "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"]
        }
      },
      "problemMatcher": []
    },
    {
      "label": "gh: Logout",
      "type": "shell",
      "command": "gh auth logout -h github.com",
      "options": {
        "shell": {
          "executable": "pwsh.exe",
          "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"]
        }
      },
      "problemMatcher": []
    },
    {
      "label": "gh: PR Create (web)",
      "type": "shell",
      "command": "gh pr create --web --fill",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": []
    },
    {
      "label": "gh: PR Status",
      "type": "shell",
      "command": "gh pr status",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": []
    },
    {
      "label": "gh: PR View (web)",
      "type": "shell",
      "command": "gh pr view --web",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": []
    },
    {
      "label": "gh: Issue Create (web)",
      "type": "shell",
      "command": "gh issue create --web",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": []
    },
    {
      "label": "gh: Repo View (web)",
      "type": "shell",
      "command": "gh repo view --web",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": []
    },
    {
      "label": "gh: Setup Git",
      "type": "shell",
      "command": "gh auth setup-git",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": []
    },
    {
      "label": "gh: Create Release (web)",
      "type": "shell",
      "command": "gh release create --web",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": []
    },
    {
      "label": "gh: Releases View (web)",
      "type": "shell",
      "command": "gh release view --web",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": []
    },
    {
      "label": "gh: Diagnostics (log)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/gh-diagnostics.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated", "clear": true }
    },
    {
      "label": "repo: Create & Push (private)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/repo-create-and-push.ps1 -Visibility private -NoPrompt",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "repo: Create & Push (public)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/repo-create-and-push.ps1 -Visibility public -NoPrompt",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "repo: Create & Push (public, HTTPS)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/repo-create-and-push.ps1 -Visibility public -UseHttps -NoPrompt",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "repo: Create & Push (private, HTTPS)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/repo-create-and-push.ps1 -Visibility private -UseHttps -NoPrompt",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "repo: Create & Push (choose visibility)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/repo-create-and-push.ps1 -Visibility ${input:repoVisibility} -NoPrompt",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "repo: Switch remote to HTTPS",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/git-remote-to-https.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "repo: Switch remote to SSH",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/git-remote-to-ssh.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "repo: Prefer HTTPS (no SSH key)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/git-prefer-https.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "repo: Prefer SSH",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/git-prefer-ssh.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "gh: Install global toolkit (user tasks)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/install-global-gh-toolkit.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "module: Install RepoToolkit (user scope)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/install-module-RepoToolkit.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "module: Repo Create & Push (public, HTTPS)",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -Command Import-Module RepoToolkit; Invoke-RepoCreateAndPush -Visibility public -UseHttps -NoPrompt",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "module: Self-update RepoToolkit",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/install-module-RepoToolkit.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    }
    ,
    {
      "label": "git: Push",
      "type": "shell",
      "command": "pwsh -NoProfile -ExecutionPolicy Bypass -File ${workspaceFolder}/scripts/git-push-with-fallback.ps1",
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "git: Pull --rebase",
      "type": "shell",
      "command": "git pull --rebase --autostash",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    },
    {
      "label": "git: Push (force-with-lease)",
      "type": "shell",
      "command": "git push --force-with-lease origin HEAD",
      "options": { "shell": { "executable": "pwsh.exe", "args": ["-NoProfile", "-ExecutionPolicy", "Bypass", "-Command"] } },
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" }
    }
  ],
  "inputs": [
    {
      "id": "repoVisibility",
      "type": "pickString",
      "description": "Select repository visibility",
      "options": ["private", "public", "internal"],
      "default": "private"
    },
    {
      "id": "releaseTag",
      "type": "promptString",
      "description": "Release tag to update (e.g., v0.1.1)",
      "default": "v0.1.1"
    }
  ]
}
